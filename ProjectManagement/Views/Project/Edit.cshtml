@using System;
@using Microsoft.AspNetCore.Html;
@using System.Globalization;

@{
    ViewData["Title"] = "Edit project";
}

<h1 id="page-header">@ViewData["Title"]</h2>

@{
  HtmlString content = new HtmlString(@Model.Content);
}
<form asp-controller="Project" asp-action="EditProject" asp-route-returnurl="@ViewData["ReturnUrl"]" method="post" class="form-horizontal">
  <div class="form-group">
    <div class="col-md-12" style="margin-top: 20px;">
      <input id="Name" name="Name" type="text" class="form-control" placeholder="Project Name" value="@Model.Name"/>
    </div>
  </div>
  <!-- Create the editor container -->
  <div id="editor" style="height: 400px; margin-bottom: 20px;">
    @content
  </div>
  <textarea id="Content" name="Content" style="display: none;">@content</textarea>
  <label for="DueDate">Due date:</label><input type="date" id="DueDate" name="DueDate" value='@Model.DueDate.ToString("yyyy-MM-dd")' style="margin-left: 10px;">
  <br><label for="Status">Status: </label><select id="Status" name="Status" style="margin-top: 10px; margin-left: 10px;">
    @if (@Model.Status == "In Progress")
    {
      <option value="In Progress" selected>In progress</option>
      <option value="Done">Done</option>
    }
    else 
    {
      <option value="In Progress">In Progress</option>
      <option value="Done" selected>Done</option>
    }

  </select>
  <br><button type="submit" class="btn" style="margin-top: 20px;">Update</button>
</form>

<!-- Include the Quill library -->
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>

<!-- Initialize Quill editor -->
<script>
  // quill configuration
  var quill = new Quill('#editor', {
    theme: 'snow',
    placeholder: 'Project content',
  });

  // if quill textarea has changed, change the innertext of textarea with updated content.
  quill.on('text-change', function(delta, oldDelta, source) {
    $("#Content").val(quill.root.innerHTML);
  });
</script>